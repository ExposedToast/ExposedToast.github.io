<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coin Market Cap</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4"></script>
</head>
<body>
  <div>
    <canvas id="marketcap-chart"></canvas>
  </div>
  
  <script>
      const COINGECKO_API_URL = 'https://api.coingecko.com/api/v3';
  
  function fetchMarketCapData() {
    fetch(`${COINGECKO_API_URL}/coins/markets?vs_currency=usd&ids=bitcoin%2Cethereum`)
      .then(response => response.json())
      .then(data => {
        const bitcoinMarketCap = data[0].market_cap;
        const ethereumMarketCap = data[1].market_cap;
        updateMarketCapChart(bitcoinMarketCap, ethereumMarketCap);
      })
      .catch(error => console.error(error));
  }
  
  setInterval(fetchMarketCapData, 5 * 60 * 1000);
  
  const chartElement = document.getElementById('marketcap-chart');
  const chart = new Chart(chartElement, {
    type: 'horizontalBar',
    data: {
      labels: ['Bitcoin', 'Ethereum'],
      datasets: [{
        label: 'Market Cap (USD)',
        data: [0, 0],
        backgroundColor: ['green', 'orange'],
      }]
    },
    options: {
  scales: {
    xAxes: [{
      ticks: {
        beginAtZero: true,
        callback: function(value, index, values) {
          return '$' + value.toLocaleString();
        }
      }
    }],
    yAxes: [{
      ticks: {
        reverse: true,
          }
        }]
      }
    }
  });
  
  function updateMarketCapChart(bitcoinMarketCap, ethereumMarketCap) {
    const totalMarketCap = bitcoinMarketCap + ethereumMarketCap;
    const bitcoinMarketCapPercentage = bitcoinMarketCap / totalMarketCap * 100;
    const ethereumMarketCapPercentage = ethereumMarketCap / totalMarketCap * 100;
    chart.data.datasets[0].data = [bitcoinMarketCapPercentage, ethereumMarketCapPercentage];
    chart.update();
  }
  </script>
</body>
</html>
